<h2 class="md-end-block md-heading md-focus"><span class="md-plain">Summary</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Connectors</span></strong></span><span class="md-plain"> are used throughout </span><span class=""><strong><span class="md-plain">Power Platform Pillars</span></strong></span><span class="md-plain"> such as </span><span class=""><strong><span class="md-plain">Microsoft Power Automate</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Microsoft Power Apps</span></strong></span><span class="md-plain">. They are also used in </span><span class=""><strong><span class="md-plain">Azure</span></strong></span><span class="md-plain"> services such as </span><span class=""><strong><span class="md-plain">Azure Logic Apps</span></strong></span><span class="md-plain">. </span><span class=""><strong><span class="md-plain">Connectors</span></strong></span><span class="md-plain"> are a wrapper around first and third party APIs to provide a way for services to talk to each other. They represent the glue between services, allowing users to setup </span><span class=""><strong><span class="md-plain">Connections</span></strong></span><span class="md-plain"> to connect various accounts together. These connectors encompass a wide range of SaaS providers including </span><span class=""><strong><span class="md-plain">Dynamics 365</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">Office 365</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">Dropbox</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">Salesforce</span></strong></span><span class="md-plain"> and more.</span></p>
<p class="md-end-block md-p"><span class="md-plain">This article will explore </span><span class=""><strong><span class="md-plain">Connectors</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Connections</span></strong></span><span class="md-plain"> to help administrators better understand how they are being leveraged within the </span><span class=""><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain">. We will discuss components of connectors and where to go to find out about connectors used with </span><span class=""><strong><span class="md-plain">Power Apps</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Power Automate</span></strong></span><span class="md-plain">. Next, we will connections and their boundaries and impact. Finally, we will explore </span><span class=""><strong><span class="md-plain">Data Loss Prevention Policies</span></strong></span><span class="md-plain"> and how to restrict connector usage for business and non-business related purposes.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Connector Components</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Each </span><span class=""><strong><span class="md-plain">connector</span></strong></span><span class="md-plain"> used in the </span><span class=""><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain"> consists of operations called "</span><span class=""><strong><span class="md-plain">Actions</span></strong></span><span class="md-plain">" and "</span><span class=""><strong><span class="md-plain">Triggers</span></strong></span><span class="md-plain">". </span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Actions</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Actions are operations that read, change or manipulate data or variables, all directed by a Maker. These are tied to the </span><span class=""><strong><span class="md-plain">Connector (Open API) definition</span></strong></span><span class="md-plain"> provided by each service. Examples include Reading data from the </span><span class=""><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain">, sending emails through </span><span class=""><strong><span class="md-plain">Outlook</span></strong></span><span class="md-plain"> or internal operations such as parsing JSON or looping through a result set.</span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Triggers</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Triggers represent notifications to </span><span class=""><strong><span class="md-plain">Microsoft Power Automate Flows</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Azure Logic Apps</span></strong></span><span class="md-plain"> that an event has occurred. They are generally grouped into two types of triggers: </span><span class=""><strong><span class="md-plain">Poll and Push Triggers</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">A </span><span class=""><strong><span class="md-plain">polling trigger</span></strong></span><span class="md-plain"> makes a call into the API at a reoccurring frequency to check for new messages. When new data is available, the trigger will run the </span><span class=""><strong><span class="md-plain">Flow</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Logic App</span></strong></span><span class="md-plain">. Examples include </span><span class=""><strong><span class="md-plain">timer triggers</span></strong></span><span class="md-plain">. A great breakdown into explaining, using and creating a custom connector that uses polling is titled "</span><span class="md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/create-polling-trigger#create-polling-triggers-from-the-ui" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Use a polling trigger for Azure Logic Apps and Microsoft Power Automate</span></strong></span></a></span><span class="md-plain">".</span></p>
<p class="md-end-block md-p" style="padding-left: 150px;"><span style="font-size: 150%;"><strong><span class="md-plain">[NOTE: CLICK ON EACH IMAGE FOR INCREASED CLARITY]</span></strong></span></p>
<p class="md-end-block md-p" style="padding-left: 150px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Triggers/how-polling-works.png"><img height="310" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124582v1.png" width="536" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">A </span><span class=""><strong><span class="md-plain">push trigger</span></strong></span><span class="md-plain"> is a listener waiting for an event to occur or a message to be received. Once received, the trigger will run the </span><span class=""><strong><span class="md-plain">Flow</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Logic App.</span></strong></span><span class="md-plain"> Examples include </span><span class=""><strong><span class="md-plain">Flow button presses</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">HTTP or Webhook</span></strong></span><span class="md-plain"> connectors. Another article, titled "</span><span class=""><strong><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/create-webhook-trigger" rel="noopener noreferrer" target="_blank"><span class="md-plain">Use a webhook as a trigger for Azure Logic Apps and Power Automate</span></a></span></strong></span><span class="md-plain">", explains how to create a custom connector for GitHub to listen for push events on a repo.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Connector Definition</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">In the case of the </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/dropbox/#definitions" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Dropbox</span></strong></span><span class="md-plain"> connector</span></a></span><span class="md-plain">, we can see in the documentation the actions and triggers defined in the Open API definition. This same definition is available using the </span><span class=""><strong><span class="md-plain">PowerApps Administration PowerShell module</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Management connector</span></strong></span><span class="md-plain"> and the </span><span class=""><em><span class="md-plain">list connectors</span></em></span><span class="md-plain"> action. The image below was extracted from the Management connector list connector action.</span></p>
<p class="md-end-block md-p" style="padding-left: 180px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Connector.Dropbox.NameAndProprties.JPG"><img height="351" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124583v2.jpeg" width="399" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Each connector definition will include a "tier" property, this tells administrators if the connector is considered premium. This can also impact out </span><span class=""><strong><span class="md-plain">DLP Policies</span></strong></span><span class="md-plain"> discussed below.</span></p>
<p class="md-end-block md-p" style="padding-left: 180px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Connector.Dropbox.DescriptionAndTier.JPG"><img height="177" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124583v3.jpeg" width="446" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Standard and Premium Connector Tiers</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class=" md-link"><a href="https://docs.microsoft.com/en-us/power-platform/admin/powerapps-flow-licensing-faq" rel="noopener noreferrer" target="_blank"><span class="md-plain">Both Standard and Premium tiers are available based on the type of Office 365 licensing</span></a></span><span class="md-plain">. Below you'll find references to both tiers. Standard licenses, where the service is owned by Microsoft, </span><span class="md-link"><a href="https://docs.microsoft.com/en-us/power-platform/admin/wp-data-loss-prevention" rel="noopener noreferrer" target="_blank"><span class="md-plain">can't be added to the </span><span class=""><strong><span class="md-plain">Blocked Data Loss Prevention Policy</span></strong></span></a></span><span class="md-plain"> discussed below.</span></p>
<p class="md-end-block md-p"><span class="md-link"><a href="https://docs.microsoft.com/en-us/connectors/connector-reference/connector-reference-premium-connectors" rel="noopener noreferrer" target="_blank"><span class="md-plain">List of Premium Connectors</span></a></span></p>
<p class="md-end-block md-p"><span class="md-link"><a href="https://docs.microsoft.com/en-us/connectors/connector-reference/connector-reference-standard-connectors" rel="noopener noreferrer" target="_blank"><span class="md-plain">List of Standard Connectors</span></a></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Preview and Production Connector Release Statuses</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Preview</span></strong></span><span class="md-plain"> Connectors, can be used in Production environments but with caution as indicated by the light blub symbol attached to each connector. If a connector is not in preview, then its considered in a </span><span class=""><strong><span class="md-plain">Production</span></strong></span><span class="md-plain"> release status. For each connector, check to see the regional availability using the links provided.</span></p>
<p class="md-end-block md-p"><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/connector-reference/connector-reference-preview-connectors" rel="noopener noreferrer" target="_blank"><span class="md-plain">List of Preview Connectors</span></a></span></p>
<p class="md-end-block md-p"><span class="md-link"><a href="https://docs.microsoft.com/en-us/connectors/connector-reference/connector-reference-production-connectors" rel="noopener noreferrer" target="_blank"><span class="md-plain">List of Production Connectors</span></a></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Custom Connectors</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">As described above, hundreds (as of this time 325+) of connectors exist to allow </span><span class=""><strong><span class="md-plain">Power Apps</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Power Automate</span></strong></span><span class="md-plain"> to talk to services. That said, there will eventually come a time where an API that your app or flow needs to talk to will not be available as a provided connector. Luckily, the concept of </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Custom Connectors</span></strong></span></a></span><span class="md-plain"> can help fill this gap. </span></p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Custom connectors</span></strong></span><span class="md-plain"> allow developers to build and secure APIs that can be consumed by Makers and Users of the </span><span class=""><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain">. Common examples include using </span><span class=""><strong><span class="md-plain">Azure Functions</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Web Apps</span></strong></span><span class="md-plain"> to </span><span class=""><strong><span class="md-plain">build</span></strong></span><span class="md-plain"> an API and using </span><span class=""><strong><span class="md-plain">Azure AD</span></strong></span><span class="md-plain"> to </span><span class=""><strong><span class="md-plain">secure</span></strong></span><span class="md-plain"> the API. Finally, the API will need to be </span><span class=""><strong><span class="md-plain">defined</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">described</span></strong></span><span class="md-plain"> using a specification called </span><span class=""><strong><span class="md-plain">Open API</span></strong></span><span class="md-plain">. One of the advantages of using </span><span class=""><strong><span class="md-plain">Azure Functions is that it can generate the Open API spec</span></strong></span><span class="md-plain"> for a developer, allowing for a seamless handoff to the author of the </span><span class=""><strong><span class="md-plain">Custom Connector</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">This image from the </span><span class=""><strong><span class="md-plain">Custom Connectors</span></strong></span><span class="md-plain"> overview does a wonderful job of visualizing the steps involved here.</span></p>
<p class="md-end-block md-p" style="padding-left: 180px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Custom/authoring-steps.png"><img height="98" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124584v4.png" width="490" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">The scope of creating a </span><span class=""><strong><span class="md-plain">custom connector</span></strong></span><span class="md-plain"> covers a wide range of additional concepts and considerations, such as authentication and access protocols. I would consider starting with </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/create-postman-collection" rel="noopener noreferrer" target="_blank"><span class="md-plain">this step by step to begin creating your own Custom Connector</span></a></span><span class="md-plain"> or here for using the </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/create-logic-apps-connector" rel="noopener noreferrer" target="_blank"><span class="md-plain">Logic Apps Custom Connector service</span></a></span><span class="md-plain"> in </span><span class=""><strong><span class="md-plain">Microsoft Azure</span></strong></span><span class="md-plain">. </span><span class=""><strong><span class="md-plain">Custom connectors</span></strong></span><span class="md-plain"> are scoped to a specific environment, this is important when discussing </span><span class=""><strong><span class="md-plain">Data Loss Prevention Policies</span></strong></span><span class="md-plain"> below.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Solution Aware Connectors</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/common-data-service/use-solution-explorer" rel="noopener noreferrer" target="_blank"><span class="md-plain">Custom connectors can also be created within Dynamics 365 or Common Data Service solutions</span></a></span><span class="md-plain">. Enterprises that need to utilize custom connectors in a production ready environment, will want </span><span class=""><strong><span class="md-plain">automation tools to migrate changes from developers</span></strong></span><span class="md-plain">. </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/customconnectorssolutions" rel="noopener noreferrer" target="_blank"><span class="md-plain">Solution aware custom connectors</span></a></span><span class="md-plain">, as part of a </span><span class=""><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain"> solution, can be neatly packaged and moved across sandbox and test environments towards production. Administrators can leverage existing tools such as </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/compress-extract-solution-file-solutionpackager" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Solution Packager</span></strong></span></a></span><span class="md-plain"> to unpack and store within source control.</span></p>
<p class="md-end-block md-p"><span class="md-plain">When working with custom connectors in solutions, be sure to reference and evaluate the </span><span class="md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/customconnectorssolutions#known-limitations" rel="noopener noreferrer" target="_blank"><span class="md-plain">Known Limitations</span></a></span><span class="md-plain"> currently with this feature.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Connections</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Connections</span></strong></span><span class="md-plain"> are used by </span><span class=""><strong><span class="md-plain">Power Apps</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Power Automate</span></strong></span><span class="md-plain"> to activate and work with </span><span class=""><strong><span class="md-plain">Connectors</span></strong></span><span class="md-plain">. When viewing within the Portal, each connection has an identifier, the connector its using, the creation time and who created it as well as the current environment and status. Each connection shows how its used across </span><span class=""><strong><span class="md-plain">Power Apps</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Power Automate Flows</span></strong></span><span class="md-plain">. The below image shows a connection in the </span><span class=""><strong><span class="md-plain">Maker Portal</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 210px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Connections.AppInsights.Portal.JPG"><img height="418" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124584v5.jpeg" width="390" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Here is the same </span><span class=""><em><span class="md-plain">Azure Application Insights</span></em></span><span class="md-plain"> connection shown using the </span><span class=""><strong><span class="md-plain">PowerShell module for Power Apps Administration tasks</span></strong></span><span class="md-plain">. This option provides us an option to view the current status programmatically.</span></p>
<p class="md-end-block md-p" style="padding-left: 150px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Connections.AppInsights.PowerShell.JPG"><img height="48" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124585v6.jpeg" width="495" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">The </span><span class=""><strong><span class="md-plain">same connector can be used for multiple connections</span></strong></span><span class="md-plain"> as shown in the image below with multiple entries for </span><span class=""><em><span class="md-plain">Azure DevOps</span></em></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 180px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Connections.Overview.MultipleSameConnector.JPG"><img height="277" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124585v7.jpeg" width="490" /></span></p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Connections</span></strong></span><span class="md-plain"> can be connected to a user account but can also work with service principals. </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/custom-connectors/connection-parameters" rel="noopener noreferrer" target="_blank"><span class="md-plain">The supported types of authentication are None, Basic, API Key and OAuth 2.0</span></a></span><span class="md-plain">.</span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Connections across environments</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Environments represent boundaries between data sources, customizations, etc within the </span><span class=""><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain"> and this includes connections. One question that will eventually come up is how to work with solution aware components that use connections. The connections that may be used for development purposes won't necessarily work in production workloads.</span></p>
<p class="md-end-block md-p"><span class="md-plain">The typical approach I've seen is to create the connections manually and update the connector's connection where needed. Using </span><span class=""><strong><span class="md-plain">PowerShell</span></strong></span><span class="md-plain"> or potentially other connectors (i.e. </span><span class=""><strong><span class="md-plain">Power Automate Management</span></strong></span><span class="md-plain">), automation techniques can be applied as part of your ALM strategy.</span></p>
<p class="md-end-block md-p" style="padding-left: 180px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Moving Solutions and Configuring Connections.png"><img height="178" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124586v8.png" width="428" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Quick Point on Migrating Managed Solution Power Automate Flows</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Recently I begin investigating scenarios of moving flows and applying connections as referenced above. Using that approach I was able to apply connections using automation techniques with </span><span class=""><strong><span class="md-plain">Microsoft Power Automate</span></strong></span><span class="md-plain">. This worked and I was able to successfully apply the connection and </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/power-automate/web-api#update-a-flow" rel="noopener noreferrer" target="_blank"><span class="md-plain">turn on the Flow</span></a></span><span class="md-plain"> using the </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/power-automate/web-api" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Power Automate (CDS) API</span></strong></span></a></span><span class="md-plain">. However by doing this, an </span><span class=""><strong><span class="md-plain">active unmanaged layer was introduced</span></strong></span><span class="md-plain">. This causes concern as subsequent changes performed on the flow will be underneath the active layer as pointed out in </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/common-data-service/use-solution-explorer#known-limitations" rel="noopener noreferrer" target="_blank"><span class="md-plain">this </span><span class=""><strong><span class="md-plain">Known Limitations</span></strong></span><span class="md-plain"> section</span></a></span><span class="md-plain">. </span></p>
<p class="md-end-block md-p"><span class="md-plain">"</span><span class=""><em><span class="md-plain">Importing a solution containing a flow will not automatically create or associate required connections. The flow must be edited to fix the connections.</span></em></span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class=""><em><span class="md-plain">If using managed solutions, this creates an active customization in the unmanaged layer. Therefore subsequent solution updates to the flow will not be reflected</span></em></span><span class="md-plain">."</span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-plain">Until I find a solution to this, consider removing the active layer and applying the solution. In my findings when the active layer was applied, the flow reverted back to its original state. </span><span class="md-link"><a href="https://github.com/aliyoussefi/MonitoringPowerPlatform/raw/master/Samples/PowerAutomate/SolutionAware/TurnonImportedFlowfromSolution_20200430181254.zip" rel="noopener noreferrer" target="_blank"><span class="md-plain">Here is the extracted flow to use as an example</span></a></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/Flow.TurnOnSolutionAwareFlow.JPG"><img height="345" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124586v9.jpeg" width="326" /></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Data Loss Prevention Policies</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class=" md-link"><a href="https://docs.microsoft.com/en-us/power-platform/admin/wp-data-loss-prevention" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Data Loss Prevention Policies</span></strong></span></a></span><span class="md-plain"> help protect and secure organizational data within an enterprise by providing rules enforcing what connectors can be used. </span><span class=""><strong><span class="md-plain">Connectors</span></strong></span><span class="md-plain"> can be grouped into </span><span class=""><strong><span class="md-plain">Business</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">Non-Business</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Blocked</span></strong></span><span class="md-plain"> classifications which determine if they can be used within </span><span class=""><strong><span class="md-plain">Power Apps</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Flows</span></strong></span><span class="md-plain">. These </span><span class=""><strong><span class="md-plain">policies can be scoped to a specific environment or across all environments</span></strong></span><span class="md-plain"> within a tenant.</span></p>
<p class="md-end-block md-p"><span class="md-plain">Here is an image showing a </span><span class=""><strong><span class="md-plain">Business Data Only</span></strong></span><span class="md-plain"> policy I created that is </span><span class=""><strong><span class="md-plain">scoped to a single environment</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 180px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors//DLP/BusinessDataOnly.Example.JPG"><img height="117" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124586v10.jpeg" width="493" /></span></p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Blocked policies</span></strong></span><span class="md-plain"> restrict resources from interacting with a specific service. All third-party connections and Microsoft owned </span><span class=""><strong><span class="md-plain">Premium</span></strong></span><span class="md-plain"> connectors (except </span><span class=""><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain">) can be blocked.</span></p>
<p class="md-end-block md-p"><span class="md-plain">This image shows an error message when attempting to use connectors that are from different policy groups.</span></p>
<p class="md-end-block md-p" style="padding-left: 150px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/DLP/Flow.DlpViolation.ErrorMessage.JPG"><img height="23" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124587v11.jpeg" width="526" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">DLP Policies and Power App Administration PowerShell</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">As detailed in "</span><span class=" md-link"><a href="https://flow.microsoft.com/en-us/blog/introducing-http-and-custom-connector-support-for-data-loss-prevention-policies/" rel="noopener noreferrer" target="_blank"><span class="md-plain">Introducing HTTP and Custom Connector Support for Data Loss Prevention Policies</span></a></span><span class="md-plain">" by </span><span class=" md-link"><a href="https://flow.microsoft.com/en-us/blog/author/jolevesq/" rel="noopener noreferrer" target="_blank"><span class="md-plain">Jonathon Levesque</span></a></span><span class="md-plain">, these policies can be used for </span><span class=""><strong><span class="md-plain">HTTP and Custom Connectors</span></strong></span><span class="md-plain">. There is an important note that Jonathon documents that is worth pointing out:</span></p>
<p class="md-end-block md-p"><span class="md-plain">"</span><span class=""><em><span class="md-plain">To add support for custom connectors and/or HTTP connectors to a policy using the PowerShell, download and import the latest PowerApps PowerShell scripts from the link above and use the cmdlets &lsquo;New-AdminDlpPolicy&rsquo;, &lsquo;Set-AdminDlpPolicy&rsquo;, &lsquo;Add-CustomConnectorToPolicy&rsquo;, and &lsquo;Remove-CustomConnectorFromPolicy&rsquo; to modify a policy. The cmdlet &lsquo;Get-Help </span><span class="md-tag md-raw-inline">&lt;cmdlet name&gt;</span><span class="md-plain"> -detailed&rsquo; can be used as a reference.</span></em></span></p>
<p class="md-end-block md-p"><span class=""><em><span class="md-plain">Note: Use the schema version &lsquo;2018-11-01&prime; when creating or updating a DLP policy to include HTTP connectors. Adding HTTP support using the template or PowerShell will only affect the specified policy. New policies created via the Admin Center will not contain the HTTP connectors.</span></em></span></p>
<p class="md-end-block md-p"><span class=""><em><span class="md-plain">Caution: WE DO NOT SUPPORT DOWNGRADING FROM SCHEMA VERSION 2018-11-01. Once HTTP support is added to a policy, it cannot be taken away. Attempting to do so may corrupt that DLP policy. Furthermore, if a DLP policy is updated to support HTTP connectors, current flows using these HTTP capabilities may be shut off.</span></em></span><span class="md-plain">"</span></p>
<p class="md-end-block md-p"><span class="md-plain">This image shows, using the </span><span class=""><strong><span class="md-plain">Power App Administration PowerShell</span></strong></span><span class="md-plain"> module and the </span><span class=""><strong><span class="md-plain">Get-AdminDlpPolicy</span></strong></span><span class="md-plain"> cmdlet, I can list out the connectors for both business and non-business groups.</span></p>
<p class="md-end-block md-p" style="padding-left: 210px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/DLP/BusinessDataOnly.PowerShell.Example.JPG"><img height="135" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124587v12.jpeg" width="465" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Using the below </span><span class=""><strong><span class="md-plain">PowerShell</span></strong></span><span class="md-plain"> command, the </span><span class=""><strong><span class="md-plain">DLP Policy</span></strong></span><span class="md-plain"> can be read and audited.</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><span>[embed:dc8ab71f-3b98-42d9-b0f6-e21e02a0f8e2:8e27d827-17dc-48e2-bbe6-1ec65e676ae9:type=powershell&text=Get-AdminDlpPolicy%20%7BDLP%20Policy%20Name%7D]</span></pre>
<p class="md-end-block md-p"><span class="md-plain">The </span><span class=""><strong><span class="md-plain">PowerShell</span></strong></span><span class="md-plain"> command above shows how to work with the </span><span class=""><strong><span class="md-plain">DLP Policy Name</span></strong></span><span class="md-plain"> to limit the response to a specific policy. The name can easily be found in the </span><span class=""><strong><span class="md-plain">URL</span></strong></span><span class="md-plain"> within the </span><span class=""><strong><span class="md-plain">PowerApps Admin Portal</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 210px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/DLP/DlpPolicyNamefromUrlToPowerShell.JPG"><img height="160" src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/a2f9b808_2D00_3d91_2D00_4be0_2D00_88ae_2D00_bcb15d9c5bd5-245500-complete/pastedimage1588280124587v13.jpeg" width="474" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Here is a gif showing the login flow and using the </span><span class=""><strong><span class="md-plain">Get-AdminDlpPolicy</span></strong></span><span class="md-plain"> and reviewing the </span><span class=""><strong><span class="md-plain">Non-Business Data Group</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain"><img alt="" height="828" src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/DLP/PowerShell.Get-AdminDLPPolicy.NonBusinessGroup.gif" width="1156" /></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/Connectors/DLP/PowerShell.Get-AdminDLPPolicy.NonBusinessGroup.gif"></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Next Steps</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">In this article we have covered foundational information and concepts for </span><span class=""><strong><span class="md-plain">Connectors</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">Connections</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Data Loss Prevention Policies</span></strong></span><span class="md-plain">. We have discussed some of the boundaries and limitations to be aware of. Examples of working with the </span><span class=""><strong><span class="md-plain">Power Apps Admin Portal</span></strong></span><span class="md-plain"> as well as the </span><span class=""><strong><span class="md-plain">PowerApps Administration PowerShell modules</span></strong></span><span class="md-plain"> were examined.</span></p>
<p class="md-end-block md-p"><span class="md-plain">This article is a good starting point to better understanding how to work with powerful connectors such as the </span><span class=""><strong><span class="md-plain">Power Automate Management and Admin connectors</span></strong></span><span class="md-plain"> referenced in a future article. The article also begins the journey into the </span><span class=""><strong><span class="md-plain">Power Automate API</span></strong></span><span class="md-plain"> and how </span><span class=""><strong><span class="md-plain">solution layers can impact changes to components</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">If you are interested in learning more about </span><span class="md-link"><a href="/crm/b/crminthefield/posts/pfe-dynamics-365-service-offerings" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">specialized guidance and training</span></strong></span><span class="md-plain"> for monitoring or other areas of the Power Platform</span></a></span><span class="md-plain">, which includes a </span><span class=" md-link"><a href="/cfs-file/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/WorkshopPLUS-_2D00_-Dynamics-365-Customer-Engagement-Monitoring-with-Application-lnsights-1-Day-with-Lab_2D00_FA5D599F_2D00_20E4_2D00_4087_2D00_A713_2D00_39FBD14DF7E5.pdf" rel="noopener noreferrer" target="_blank"><span class="md-plain">monitoring workshop</span></a></span><span class="md-plain">, please contact your </span><span class=""><strong><span class="md-plain">Technical Account Manager</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Microsoft representative</span></strong></span><span class="md-plain"> for further details. </span></p>
<p class="md-end-block md-p"><span class="md-plain">Your feedback is </span><span class=""><strong><span><u><span class="md-plain">extremely valuable</span></u></span></strong></span><span class="md-plain"> so please leave a comment below and I'll be happy to help where I can! Also, if you find any inconsistencies, omissions or have suggestions, </span><span class=" md-link"><a href="https://github.com/aliyoussefi/MonitoringPowerPlatform/issues" rel="noopener noreferrer" target="_blank"><span class="md-plain">please go here to submit a new issue</span></a></span><span class="md-plain">.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Index</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-link"><a href="/crm/b/crminthefield/posts/monitoring-the-power-platform-introduction" rel="noopener noreferrer" target="_blank"><span class="md-plain">Monitoring the Power Platform: Introduction and Index</span></a></span></p>