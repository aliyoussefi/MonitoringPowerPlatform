<h2 class="md-end-block md-heading md-focus"><span class="md-plain">Summary</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/canvas-apps/getting-started" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">Power Apps Canvas Apps</span></strong></span></a></span><span class="md-plain"> represent a no or low code approach to building and delivering modern applications for makers. The requirements of knowing programming languages such as C# have been removed allowing makers of virtually any background to build apps. These apps can be used with connectors to hundreds of connectors allowing for a flexible user interface layered on top of data sources. Apps can also be generated from data sources automatically allowing you to quickly create and deploy an application to your team or customers. </span></p>
<p class="md-end-block md-p"><span class="md-plain">This article is designed to introduce designers and analysts to the </span><span class=""><strong><span class="md-plain">Monitoring Tool within Canvas Driven Apps</span></strong></span><span class="md-plain">. In this article, we will discuss how to </span><span class=""><strong><span class="md-plain">get started using the tool</span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">interacting with the tool and exploring data returned within the tool</span></strong></span><span class="md-plain">. Finally, we will discuss </span><span class=""><strong><span class="md-plain">archiving and sharing session data</span></strong></span><span class="md-plain"> for further analysis.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Opening the Monitoring Tool</span></h2>
<hr />
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">In my experience building a canvas application, I ran into a very useful feature in the Experimental tab called the Monitoring tool. The tool captures user interactions with controls as well as calls to connectors and Power Automate operations. Let's look into how to open the tool and dig into the different entries.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src=" https://raw.githubusercontent.com/wiki/aliyoussefi/D365-Monitoring/Artifacts/CanvasApps/CanvasApp-Advanced-Monitoring.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940318v1.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Open the </span><span class=""><strong><span class="md-plain">Monitoring Tool</span></strong></span><span class="md-plain"> by going to the </span><span class=""><strong><span class="md-plain">Advanced</span></strong></span><span class="md-plain"> pane in the left hand side of the Canvas App maker portal. Clicking the link will open a new tab and launch the Monitoring tool. From here it will capture user actions and network calls. Alternatively the monitoring entries can be downloaded or a previous session can be uploaded for review.</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/TurnOnMonitoringTool.gif"><img alt="" height="528" src="/cfs-file/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/TurnOnMonitoringTool.gif" width="920" /></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Using the Monitoring Tool</span></h2>
<hr />
<p><span class="md-plain"></span>&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">Columns Listed</span></h3>
<p class="md-end-block md-p"><span class="md-plain">The </span><span class=""><strong><span class="md-plain">Monitoring Tool</span></strong></span><span class="md-plain">, when opened, presents a list of columns to help summarize each action performed in the Canvas App when designing. Each action or event is provided an </span><span class=""><strong><span class="md-plain">ID, the time it happened (down to the millisecond) and depending what type of action (Integration, User Click, etc) various other data points.</span></strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">Using the Category column, you can see what type of action was performed.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/MonitoringTool.Columns.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940319v3.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">The tool offers a handy filter box that </span><span class=""><strong><span class="md-plain">allows us to filter down to specifics such as operation or category</span></strong></span><span class="md-plain"> types. This comes in handy where you may have hundreds of events to search through.</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/FilterNetworkCallsInMonitoringTool.gif"><img height="404" src="/cfs-file/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940319v4.gif" width="868" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Also within the columns is the </span><span class=""><strong><span class="md-plain">DataSource</span></strong></span><span class="md-plain"> and </span><span class=""><strong><span class="md-plain">Control</span></strong></span><span class="md-plain"> that invoked the action. This is helpful to see what action a user may have taken that made an external call and what frequency. </span><span class=""><strong><span class="md-plain">Using this data, considerations for caching or restricting calls can be made.</span></strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">Finally, each action contains data that can be reviewed. For text boxes this may simply be what users are typing. For integrations this will include the </span><span class=""><strong><span class="md-plain">HTTP request and response, helpful for debugging</span></strong></span><span class="md-plain"> data formats as discussed later. This column also includes the </span><span class=""><strong><span class="md-plain">Formula</span></strong></span><span class="md-plain"> within in the control which shows what input properties are being used. This can help support engineers deliver feedback to developers that expected inputs or outputs are not being handled properly.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/MonitoringTool.Formula.Example.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940319v5.jpeg" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Reviewing User Actions within Canvas Apps</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Each keystroke is captured as a </span><span class=""><strong><em><span class="md-plain">UserAction</span></em></strong></span><span class="md-plain"> entry. Wait time and data input between keystrokes are captured allowing analysts to determine when and how another event may have been invoked, global variable set, etc. </span></p>
<p class="md-end-block md-p"><span class="md-plain">Each monitor entry includes </span><span class=""><strong><span class="md-plain">a unique id called a </span><span><u><span class="md-plain">uuid</span></u></span></strong></span><span class="md-plain">, </span><span class=""><strong><span class="md-plain">the time of the entry, the operation, the control type and name and the data collected</span></strong></span><span class="md-plain">. The image below shows a calendar control with the value input.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/MonitoringTool.Calendar.SetProperty.Example.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940320v6.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">In a recent investigation, I was able to use this property, along with the patch operation, to better understand why the date selected by the user was not matching to the connected data source.</span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Reviewing Connection and Power Automate Operations</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">The ability to capture and </span><span class=""><strong><span class="md-plain">investigate Connection and Power Automate integration requests and responses is where, in my opinion, the monitoring tool really begins to prove how essential of a tool it is</span></strong></span><span class="md-plain"> for a developer. Each request and response made to a first class connector or custom connector is captured as a Network entry.</span></p>
<p class="md-end-block md-p" style="padding-left: 300px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/wiki/aliyoussefi/D365-Monitoring/Artifacts/CanvasApps/CanvasApp-Monitor-Network-Entries.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940320v7.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">As shown above, a developer can view the </span><span class=""><strong><span class="md-plain">HTTP status, the duration, which operation and data source was used, as well as which control property invoked the action</span></strong></span><span class="md-plain"> for all calls made to Power Automate. This view allows a quick look to first see which calls may have failed and then to dig into the performance and payload size for tuning opportunities. </span></p>
<p class="md-end-block md-p"><span class="md-plain">In my experience </span><span class=""><strong><span class="md-plain">using this tool at the beginning of the development of a Power Automate integration will save a significant of work and time</span></strong></span><span class="md-plain"> spent debugging. Each call is captured allowing us to see not only the headers, which includes the workflow run identifiers, but the response and how it will be delivered to the </span><span class=""><strong><span class="md-plain">Canvas Driven Application</span></strong></span><span class="md-plain">. </span></p>
<p class="md-end-block md-p"><span class="md-plain">The image below shows, along with duration and payload size, the response headers for a native connection to </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/visualstudioteamservices/#list-release-definitions" rel="noopener noreferrer" target="_blank"><span class="md-plain">the Azure DevOps connector for the List release definitions response</span></a></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/CanvasApp-Monitor-Network-ListReleaseDefinitions-Response-Headers.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940320v8.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">The provided connectors should work as expected but its helpful to review these headers to gain insights into how they work. Where I find value in response headers is when working with either custom connectors or </span><span class=""><strong><span class="md-plain">invoking Power Automate flows from Canvas Apps</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">The image below is from a custom connector built using an </span><span class=""><strong><span class="md-plain">Azure Function</span></strong></span><span class="md-plain">. As shown, the "</span><span class=""><strong><em><span class="md-plain">x-ms-client-request-id</span></em></strong></span><span class="md-plain">" header is passed back but this can be expanded depending on the function output.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/MonitoringTool.AzureFunction.Example.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940320v9.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Depending on the value or control, the data needs to be consumable or else it cannot be rendered correctly. This tends to come up when working with tables or galleries within Canvas Apps that expect a flattened table, meaning columns that include complex objects or even array objects returned have some trouble.</span></p>
<p class="md-end-block md-p"><span class="md-plain">I ran into this scenario when working with the </span><span class=" md-link"><a href="https://docs.microsoft.com/en-us/connectors/visualstudioteamservices/#send-an-http-request-to-azure-devops" rel="noopener noreferrer" target="_blank"><span class="md-plain">Send an HTTP request to Azure DevOps action within the </span><span class=""><strong><span class="md-plain">Azure DevOps</span></strong></span><span class="md-plain"> connector</span></a></span><span class="md-plain"> specifically. Depending on REST API call used, various responses would be returned with objects containing objects and so on. While the connector provides the ability to use this action, </span><span class=""><strong><span class="md-plain">I recommend writing a Power Automate flow</span></strong></span><span class="md-plain"> and using the response JSON tree in the </span><span class=""><strong><span class="md-plain">Monitoring Tool</span></strong></span><span class="md-plain"> to help flatten the response. </span></p>
<p class="md-end-block md-p"><span><u><span class="md-plain">NOTE: Canvas App tables and data sets work best with strongly typed flattened datasets.</span></u></span></p>
<p class="md-end-block md-p"><span class="md-plain">The image below shows a technique I used to assist with working with the Azure DevOps action.</span></p>
<p class="md-end-block md-p" style="padding-left: 360px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/CanvasApp-Monitor-Network-GetBuilds-Response-Headers-PowerAutomate-Custom.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940321v10.jpeg" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">This image also shows very important headers we will discuss further in an article detailing the connectors between </span><span class=""><strong><span class="md-plain">Power Apps Canvas Apps and Power Automate</span></strong></span><span class="md-plain">.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Reporting and Archiving Monitoring Tool Sessions</span></h2>
<hr />
<p><span class="md-plain"></span>&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">Export and Import</span></h3>
<p class="md-end-block md-p md-focus"><span class="md-plain">The </span><span class=""><strong><span class="md-plain">Monitoring tool</span></strong></span><span class="md-plain"> allows developers and makers to export the captured events to a CSV or JSON file. This can assist with </span><span class=""><strong><span class="md-plain">troubleshooting connection issues, performance issues or simply to archive events for analysts</span></strong></span><span class="md-plain">. The file includes the request and response payload found in the online tool as well as the default columns. </span><span class="md-expand"><strong><span class="md-plain">Having the request can potentially allow for the request to be issued again invoking any external system so be cautious when handing off this file</span></strong></span><span class="md-plain">. The exported file can also be imported back into tool for a detailed breakdown.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/wiki/aliyoussefi/D365-Monitoring/Artifacts/CanvasApps/CanvasApp-Monitor-Export-CSV.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940321v11.jpeg" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Reporting</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class=""><strong><span class="md-plain">Microsoft Power BI</span></strong></span><span class="md-plain"> provides data connectors for CSV and JSON files. With this connector, Power BI authors can take exported monitoring tool sessions and build visualizations allowing analysts to drill down into specifics.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/MonitoringTool.PowerBI.Service.Example.JPG"><img src="/resized-image/__size/320x240/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/pastedimage1589323940321v12.jpeg" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Archiving</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Another neat feature of </span><span class=""><strong><span class="md-plain">Microsoft Power BI</span></strong></span><span class="md-plain"> is the ability to connect to a </span><span class=""><strong><span class="md-plain">Azure Blob Storage container</span></strong></span><span class="md-plain">. Once connected, Power BI can combine files into a single query which can be used within a report. This technique will allow us to upload the session directly to a container and have this instantly be part of the </span><span class=""><strong><span class="md-plain">Power BI dashboard</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/CanvasApps/MonitoringTool/UploadMonitoringSessionToAzureAndPowerBi.gif"><img alt="" height="432" src="/cfs-file/__key/communityserver-components-multipleuploadfilemanager/e48d7015_2D00_a8f9_2D00_404e_2D00_be5a_2D00_16f6b94aa4b1-245500-complete/UploadMonitoringSessionToAzureAndPowerBi.gif" width="833" /></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Next Steps</span></h2>
<hr />
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">The native </span><span class=""><strong><span class="md-plain">Monitoring Tool</span></strong></span><span class="md-plain"> is a relatively new feature for </span><span class=""><strong><span class="md-plain">Canvas Driven Applications</span></strong></span><span class="md-plain">. I highly recommend using the tool as early in the development process as possible to better understand how the application works and where it could be tuned. The Monitoring tool really helped me better understand my integrations and how to work within the expected data delivered back to Canvas App objects.</span></p>
<p class="md-end-block md-p"><span class="md-plain">If you are interested in learning more about </span><span class=" md-link"><a href="/crm/b/crminthefield/posts/pfe-dynamics-365-service-offerings" rel="noopener noreferrer" target="_blank"><span class=""><strong><span class="md-plain">specialized guidance and training</span></strong></span><span class="md-plain"> for monitoring or other areas of the Power Platform</span></a></span><span class="md-plain">, which includes a </span><span class=" md-link"><a href="/cfs-file/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/WorkshopPLUS-_2D00_-Dynamics-365-Customer-Engagement-Monitoring-with-Application-lnsights-1-Day-with-Lab_2D00_FA5D599F_2D00_20E4_2D00_4087_2D00_A713_2D00_39FBD14DF7E5.pdf" rel="noopener noreferrer" target="_blank"><span class="md-plain">monitoring workshop</span></a></span><span class="md-plain">, please contact your </span><span class=""><strong><span class="md-plain">Technical Account Manager</span></strong></span><span class="md-plain"> or </span><span class=""><strong><span class="md-plain">Microsoft representative</span></strong></span><span class="md-plain"> for further details. </span></p>
<p class="md-end-block md-p"><span class="md-plain">Your feedback is </span><span class=""><strong><span><u><span class="md-plain">extremely valuable</span></u></span></strong></span><span class="md-plain"> so please leave a comment below and I'll be happy to help where I can! Also, if you find any inconsistencies, omissions or have suggestions, </span><span class=" md-link"><a href="https://github.com/aliyoussefi/MonitoringPowerPlatform/issues" rel="noopener noreferrer" target="_blank"><span class="md-plain">please go here to submit a new issue</span></a></span><span class="md-plain">.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Index</span></h2>
<hr />
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-link"><a href="/crm/b/crminthefield/posts/monitoring-the-power-platform-introduction" rel="noopener noreferrer" target="_blank"><span class="md-plain">Monitoring the Power Platform: Introduction and Index</span></a></span></p>
<p class="md-end-block md-p"></p>
<p class="md-end-block md-p"></p>