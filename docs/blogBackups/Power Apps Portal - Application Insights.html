<h2 class="md-end-block md-heading"><span class="md-plain">Summary</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/portals/overview#:~:text=Power%20Apps%20portals%20are%20based%20on%20Bootstrap%203.3.x,Bootstrap%203.3.x.%20Certain%20experiences%20might%20have%20known%20issues." rel="noopener noreferrer" target="_blank"><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span></a></span><span class="md-plain"> represent a unique offering to the </span><span class="md-pair-s "><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain">, one that allows the </span><span class="md-pair-s "><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain"> to reach virtually any and all users your enterprise wants to connect to. It represents the external face of your enterprise to your users, allowing them to interact with other users as well as internal representatives. Users can now provide updates and artifacts to the </span><span class="md-pair-s "><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain"> without the need to communicate with your enterprise reps, freeing them to focus on providing the best customer experience available. </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> allow its users to interact anonymously and login using their preferred identity of choice, opening up the </span><span class="md-pair-s "><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain"> like never before.</span></p>
<p class="md-end-block md-p"><span class="md-plain">This article will focus on how </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> administrators can implement a monitoring strategy to better understand their user base. Insights into user traffic and interactions with the </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> can all be tracked. Using this data, your organization can focus on how to better serve your customer base and provide an optimal solution and experience. </span></p>
<p class="md-end-block md-p"><span class="md-plain">In this article we focus on adding </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> to a </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain">. We explore how to configure and provide context which will provide rich and meaningful telemetry.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">What is Azure Application Insights</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p" style="padding-left: 360px;"><span class="md-image md-img-loaded"><img alt=" " height="69" src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/3034.pastedimage1594996026595v1.png" width="131" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">As part of the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Monitor</span></strong></span><span class="md-plain"> suite, </span><span class="md-meta-i-c  md-link"><a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview" rel="noopener noreferrer" target="_blank"><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> is an extensible Application Performance Management (APM) service</span></a></span><span class="md-plain"> that can be used to monitor applications, tests, etc. </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> can be used with any application hosted in any environment. Depending on what's being monitored there are SDKs available. For other applications connections and message delivery can be programmed using the REST APIs available.</span></p>
<p class="md-end-block md-p"><span class="md-plain">For </span><span class="md-pair-s "><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain"> components, </span><span class="md-pair-s "><strong><span class="md-plain">Application Insights</span></strong></span><span class="md-plain"> is recommended due to its direct integration with </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps</span></strong></span><span class="md-plain"> features and tools and its capabilities to deliver to the API.</span></p>
<p class="md-end-block md-p"><span class="md-plain">Once we begin sending telemetry to </span><span class="md-pair-s "><strong><span class="md-plain">Application Insights</span></strong></span><span class="md-plain"> we can review in real time availability tests, user actions, deployment metrics as well as other feedback from our applications. Connecting our messages with correlation identifiers allows us a holistic view into how our apps are interdependent upon each other. This provides the transparency desired and honestly needed with modern era technology.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Adding a Power Apps Portal to a Power Platform Environment</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">To begin working with </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain">, navigate to the </span><span class="md-pair-s "><strong><span class="md-plain">Maker Portal</span></strong></span><span class="md-plain"> and add a new application. This is similar to adding a new </span><span class="md-pair-s "><strong><span class="md-plain">Model or Canvas Driven application</span></strong></span><span class="md-plain"> within the </span><span class="md-pair-s "><strong><span class="md-plain">Maker Portal</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 330px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/7827.pastedimage1594996026596v2.png" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Go through the provisioning wizard to define the basic characteristics of your </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> including a name, the URL and what language or region to use. </span><span class="md-meta-i-c  md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/portals/create-portal" rel="noopener noreferrer" target="_blank"><span class="md-plain">Here is a reference to a step by step guide to provisioning the portal</span></a></span><span class="md-plain"> that includes important considerations.</span></p>
<p class="md-end-block md-p"><span class="md-plain">When initially configured and provisioned, a new </span><span class="md-pair-s "><strong><span class="md-plain">Model Driven Power Application</span></strong></span><span class="md-plain"> titled '</span><span class="md-pair-s "><strong><em><span class="md-plain">Portal Management</span></em></strong></span><span class="md-plain">' will appear. This application will serve as the primary customization point for makers and portal developers. This will also be where </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> will be configured to work within </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portals</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 270px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/1185.pastedimage1594996026596v3.png" /></span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong><span class="md-pair-s"><u><span class="md-plain">NOTE:</span></u></span></strong></span><span class="md-plain"> If your </span><span class="md-pair-s "><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain"> environment has migrated from </span><span class="md-pair-s "><strong><span class="md-plain">Dynamics 365</span></strong></span><span class="md-plain"> and included </span><span class="md-pair-s "><strong><span class="md-plain">Dynamics 365 Portals</span></strong></span><span class="md-plain"> you may see the </span><span class="md-pair-s "><strong><span class="md-plain">Model Driven Application</span></strong></span><span class="md-plain"> called '</span><span class="md-pair-s "><strong><em><span class="md-plain">Dynamics 365 Portals</span></em></strong></span><span class="md-plain">'.</span></p>
<p class="md-end-block md-p" style="padding-left: 270px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/0537.pastedimage1594996026597v4.png" /></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Adding Azure Application Insights to Power Apps Portal</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Similar to web based application encompassing HTML, CSS and JavaScript, </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> pages can be injected with the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights JavaScript SDK</span></strong></span><span class="md-plain">. </span><span class="md-meta-i-c md-link"><a href="https://www.linkedin.com/in/dancingwithcrm/" rel="noopener noreferrer" target="_blank"><span class="md-pair-s "><strong><span class="md-plain">Oleksandr Olashyn's</span></strong></span></a></span><span class="md-plain"> article "</span><span class="md-meta-i-c  md-link"><a href="https://www.dancingwithcrm.com/powerappsportals-tracking-using-azure-app-insights/" rel="noopener noreferrer" target="_blank"><span class="md-plain">PowerApps Portals tracking using Azure Application Insights</span></a></span><span class="md-plain">" does a great job detailing provisioning </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> and adding the </span><span class="md-pair-s "><strong><span class="md-plain">JavaScript SDK</span></strong></span><span class="md-plain"> that I describe in this section.</span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Open the Portal Management Power App</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">When a </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal Application</span></strong></span><span class="md-plain"> is added to a </span><span class="md-pair-s "><strong><span class="md-plain">Power Platform</span></strong></span><span class="md-plain"> environment, a </span><span class="md-pair-s "><strong><span class="md-plain">Model Driven Application</span></strong></span><span class="md-plain"> titled '</span><span class="md-pair-s "><strong><em><span class="md-plain">Portal Management</span></em></strong></span><span class="md-plain">' will also be added. To add </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain">, begin by playing the '</span><span class="md-pair-s "><strong><em><span class="md-plain">Portal Management</span></em></strong></span><span class="md-plain">' app.</span></p>
<p class="md-end-block md-p"><span class="md-plain">Once the application has loaded, locate the '</span><span class="md-pair-s "><strong><em><span class="md-plain">Enable Traffic Analytics</span></em></strong></span><span class="md-plain">' sub area within the Administration group on </span><span class="md-meta-i-c  md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/model-driven-apps/create-site-map-app" rel="noopener noreferrer" target="_blank"><span class="md-plain">the site map</span></a></span><span class="md-plain"> and open. </span></p>
<p class="md-end-block md-p" style="padding-left: 360px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/4786.pastedimage1594996026597v5.png" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Add the Azure Application Insights SDK</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">The </span><span class="md-pair-s "><strong><em><span class="md-plain">Portal Analytics</span></em></strong></span><span class="md-plain"> page will prompt makers to choose a portal, depending if multiples exist, and an area to include the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> snippet.</span></p>
<p class="md-end-block md-p" style="padding-left: 300px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/2772.pastedimage1594996026598v6.png" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">To locate the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights JavaScript SDK</span></strong></span><span class="md-plain"> snippet, two primary options exist: </span><span class="md-meta-i-c  md-link"><a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/javascript#snippet-based-setup" rel="noopener noreferrer" target="_blank"><span class="md-plain">reference the official Microsoft Docs site</span></a></span><span class="md-plain"> or </span><span class="md-meta-i-c  md-link"><a href="https://github.com/microsoft/ApplicationInsights-JS#snippet-setup-ignore-if-using-npm-setup" rel="noopener noreferrer" target="_blank"><span class="md-plain">go to the GitHub repository</span></a></span><span class="md-plain">. As referenced </span><span class="md-meta-i-c md-link"><a href="/crm/b/crminthefield/posts/monitoring-the-power-platform-power-apps---power-apps-component-framework" rel="noopener noreferrer" target="_blank"><span class="md-plain">in the </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Component Framework</span></strong></span><span class="md-plain"> article</span></a></span><span class="md-plain">, I tend to go with the GitHub repository but either will work.</span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong><span class="md-pair-s"><u><span class="md-plain">NOTE:</span></u></span></strong></span><span class="md-plain"> The version of the SDK may change, the current version of this writing is 2.5.6. </span><span class="md-meta-i-c  md-link"><a href="https://github.com/microsoft/ApplicationInsights-JS/releases" rel="noopener noreferrer" target="_blank"><span class="md-plain">For the most current release, refer to this reference</span></a></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">When adding the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights SDK</span></strong></span><span class="md-plain"> snippet, the application is updating a </span><span class="md-pair-s "><strong><span class="md-plain">adx_contentsnippet</span></strong></span><span class="md-plain"> entity record titled '</span><span class="md-pair-s "><strong><em><span class="md-plain">Tracking Code</span></em></strong></span><span class="md-plain">'.</span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Configure the Azure Application Insights SDK</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Once the snippet for the </span><span class="md-pair-s "><strong><span class="md-plain">JavaScript SDK</span></strong></span><span class="md-plain"> has been added, it needs to be configured to point to the organization's </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> resource. The instrumentation key is a 32 digit GUID located on the </span><span class="md-pair-s"><strong><span class="md-pair-s "><em><span class="md-plain">Overview</span></em></span></strong></span><span class="md-plain"> page of the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> resource.</span></p>
<p class="md-end-block md-p" style="padding-left: 300px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/6675.pastedimage1594996026598v7.png" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">The </span><span class="md-pair-s"><strong><span class="md-plain">instrumentation key</span></strong></span><span class="md-plain"> will need to be added to the telemetry client's configuration property '</span><span class="md-pair-s "><strong><em><span class="md-plain">instrumentationKey</span></em></strong></span><span class="md-plain">' as shown below.</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><span>[embed:dc8ab71f-3b98-42d9-b0f6-e21e02a0f8e2:a2d2440b-155b-4864-9110-947cb705a599:type=javascript&text=cfg%3A%20%7B%20%2F%2F%20Application%20Insights%20Configuration%20%20%20%20instrumentationKey%3A%20%22YOUR_INSTRUMENTATION_KEY_GOES_HERE%22%20%20%20%20%2F%2A%20...Other%20Configuration%20Options...%20%2A%2F%20%7D%7D%29%3B]</span></pre>
<p class="md-end-block md-p"><span class="md-plain">Once the </span><span class="md-pair-s"><strong><span class="md-plain">instrumentation key</span></strong></span><span class="md-plain"> has been added and the changes have been applied to the </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain">, telemetry will begin to flow to </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain">. With that in mind, as discussed in previous articles, enriching the messages sent is key to optimizing the various features of </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain">. Continuing that train of thought, let's explore some options </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> will allow for enrichment.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Enriching the Power Apps Portal Messages</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Establishing a strong session and operational context is key to not only </span><span class="md-pair-s "><strong><span class="md-plain">Power App Portal</span></strong></span><span class="md-plain"> telemetry but practically any service or application. Review </span><span class="md-meta-i-c  md-link"><a href="/crm/b/crminthefield/posts/monitoring-the-power-platform-power-apps---power-apps-component-framework#pcf-configurecontext" rel="noopener noreferrer" target="_blank"><span class="md-plain">the information found in the Power Apps Component Framework article</span></a></span><span class="md-plain">, while using </span><span class="md-pair-s "><strong><span class="md-plain">TypeScript</span></strong></span><span class="md-plain">, is applicable here working with </span><span class="md-pair-s"><strong><span class="md-plain">JavaScript</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/6740.pastedimage1594996026598v8.png" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Working with Liquid Templating Objects</span></h3>
<p class="md-end-block md-p"><span class="md-meta-i-c md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/portals/liquid/liquid-overview" rel="noopener noreferrer" target="_blank"><span class="md-pair-s "><strong><span class="md-plain">Liquid Templating</span></strong></span></a></span><span class="md-plain"> allows makers and developers to add contextual information dynamically to </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> web pages. Logged in user information, site settings, </span><span class="md-pair-s "><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain"> data, etc can all be referenced. For example, to work with user contextual information, </span><span class="md-meta-i-c  md-link"><a href="https://docs.microsoft.com/en-us/powerapps/maker/portals/liquid/liquid-objects#user" rel="noopener noreferrer" target="_blank"><span class="md-plain">refer to this article</span></a></span><span class="md-plain">, which describes user as an entity object (contact). </span></p>
<p class="md-end-block md-p"><span class="md-plain">Below is an example of referencing a logged in user's information to set the authenticated user context within the </span><span class="md-pair-s"><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> telemetry client. </span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong><span class="md-pair-s"><u><span class="md-plain">Author's Note:</span></u></span></strong></span><span class="md-plain"> Big thanks to </span><span class="md-pair-s "><strong><span class="md-meta-i-c  md-link"><a href="https://www.linkedin.com/in/nikitapolyakov/" rel="noopener noreferrer" target="_blank"><span class="md-plain">Nikita Polyakov</span></a></span></strong></span><span class="md-plain"> for his assistance with creating and identifying enhancements to this script!</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/5736.pastedimage1594996026599v9.png" /></span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/0638.pastedimage1594996026599v10.png" /></span></p>
<h3 class="md-end-block md-heading"><span class="md-plain">Working with Portal Web Page Variables</span></h3>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">The window object on each </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> web page contains a Microsoft object which includes information about the portal and user. I haven't seen this documented so I would not rely on it being supported.</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/3527.pastedimage1594996026599v11.png" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Using this object we can set the "</span><span class="md-pair-s "><strong><em><span class="md-plain">ai.cloud.role</span></em></strong></span><span class="md-plain">" or other contextual attributes to set the type of Portal:</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/3683.pastedimage1594996026600v12.png" /></span></p>
<p class="md-end-block md-p"></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Reviewing Initial Messages in Azure Application Insights</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">Now that the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> snippet has been added, the configuration established and the context enriched, the final step to getting started is to review messages. Navigating to the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Portal</span></strong></span><span class="md-plain"> and </span><span class="md-pair-s "><strong><span class="md-plain">Application Insights</span></strong></span><span class="md-plain"> scripts, we can write basic </span><span class="md-pair-s "><strong><span class="md-plain">Kusto</span></strong></span><span class="md-plain"> queries to see our users interaction with the portal.</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/5684.pastedimage1594996026600v13.png" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">Portal, being a Web App by nature, works really well with various features of </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain">. Some highlights include </span><span class="md-pair-s "><strong><span class="md-plain">User Session Timelines</span></strong></span><span class="md-plain"> and </span><span class="md-pair-s "><strong><span class="md-plain">User Flows</span></strong></span><span class="md-plain">. These features tend to provide a good visualization and help answer questions like "</span><span class="md-pair-s "><strong><em><span class="md-plain">where do my users typically go from the home page?</span></em></strong></span><span class="md-plain">" or "</span><span class="md-pair-s "><strong><em><span class="md-plain">how long were they on a page before navigating away?</span></em></strong></span><span class="md-plain">"</span></p>
<p class="md-end-block md-p" style="padding-left: 240px;"><span class="md-image md-img-loaded"><img alt=" " src="/resized-image/__size/320x240/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/4670.pastedimage1594996026600v14.png" /></span></p>
<p class="md-end-block md-p"><span class="md-plain">As discussed above, enriching messages is key to understanding and gaining insight into potential problems. </span><span class="md-pair-s "><strong><span class="md-pair-s"><u><span class="md-plain">In the example below I have created a scenario where a AJAX call has caused a performance concern.</span></u></span></strong></span><span class="md-plain"> </span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong><span class="md-pair-s"><u><span class="md-plain"><img alt=" " height="497" src="https://raw.githubusercontent.com/aliyoussefi/MonitoringPowerPlatform/master/Artifacts/PowerAppsPortal/ApplicationMapAndDependencyAjaxCallPerformance.gif" width="1007" /></span></u></span></strong></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded"></span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Sample Code</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">The sample code used in this article can be found in the </span><span class="md-meta-i-c  md-link"><a href="https://github.com/aliyoussefi/MonitoringPowerPlatform/blob/master/Samples/PowerAppsPortals/AppInsights/ApplicationInsightsV2_SnippetAndExample.js" rel="noopener noreferrer" target="_blank"><span class="md-pair-s "><strong><span class="md-plain">MonitoringPowerPlatform</span></strong></span><span class="md-plain"> GitHub repo located here</span></a></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Next Steps</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain"> </span></p>
<p class="md-end-block md-p"><span class="md-plain">In this article we have discussed how to set up </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain"> with </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portals</span></strong></span><span class="md-plain">. We covered using the content snippet to add the </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights JavaScript SDK</span></strong></span><span class="md-plain">. We discussed how to extend the SDK to include values from liquid templating and window objects. Finally we reviewed page views and how they can represented in </span><span class="md-pair-s "><strong><span class="md-plain">Application Insights</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">For next steps, </span><span class="md-meta-i-c  md-link"><a href="https://stoneridgesoftware.com/using-liquid-templates-and-fetchxml-to-retrieve-data-in-a-dynamics-365-online-portal/" rel="noopener noreferrer" target="_blank"><span class="md-plain">continue exploring liquid templating</span></a></span><span class="md-plain"> and how to continuous enrich your messages sent to </span><span class="md-pair-s "><strong><span class="md-plain">Azure Application Insights</span></strong></span><span class="md-plain">. Consider </span><span class="md-pair-s "><strong><span class="md-plain">the custom property and metrics bag and how these can be supplemented</span></strong></span><span class="md-plain"> with </span><span class="md-pair-s "><strong><span class="md-plain">Common Data Service</span></strong></span><span class="md-plain"> content or browser resource timings. Also consider ways add instrumentation to other aspects of </span><span class="md-pair-s "><strong><span class="md-plain">Power Apps Portal</span></strong></span><span class="md-plain"> than just collecting Page Views including </span><span class="md-pair-s "><strong><span class="md-plain">page exceptions</span></strong></span><span class="md-plain">, </span><span class="md-pair-s "><strong><span class="md-plain">dependent API calls</span></strong></span><span class="md-plain">, </span><span class="md-pair-s "><strong><span class="md-plain">JavaScript processing</span></strong></span><span class="md-plain">, etc.</span></p>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">Continuing this series we will cover how to implement and use </span><span class="md-pair-s "><strong><span class="md-plain">Azure Blob Storage</span></strong></span><span class="md-plain"> for </span><span class="md-pair-s "><strong><span class="md-plain">diagnostic logging</span></strong></span><span class="md-plain">.</span></p>
<p class="md-end-block md-p"><span class="md-plain">If you are interested in learning more about </span><span class="md-meta-i-c  md-link"><a href="/crm/b/crminthefield/posts/pfe-dynamics-365-service-offerings" rel="noopener noreferrer" target="_blank"><span class="md-pair-s "><strong><span class="md-plain">specialized guidance and training</span></strong></span><span class="md-plain"> for monitoring or other areas of the Power Platform</span></a></span><span class="md-plain">, which includes a </span><span class="md-meta-i-c  md-link"><a href="/cfs-file/__key/communityserver-blogs-components-weblogfiles/00-00-00-17-38/WorkshopPLUS-_2D00_-Dynamics-365-Customer-Engagement-Monitoring-with-Application-lnsights-1-Day-with-Lab_2D00_FA5D599F_2D00_20E4_2D00_4087_2D00_A713_2D00_39FBD14DF7E5.pdf" rel="noopener noreferrer" target="_blank"><span class="md-plain">monitoring workshop</span></a></span><span class="md-plain">, please contact your </span><span class="md-pair-s "><strong><span class="md-plain">Technical Account Manager</span></strong></span><span class="md-plain"> or </span><span class="md-pair-s "><strong><span class="md-plain">Microsoft representative</span></strong></span><span class="md-plain"> for further details.</span></p>
<p class="md-end-block md-p"><span class="md-plain">Your feedback is </span><span class="md-pair-s "><strong><span class="md-plain">extremely valuable</span></strong></span><span class="md-plain"> so please leave a comment below and I'll be happy to help where I can! Also, if you find any inconsistencies, omissions or have suggestions, </span><span class="md-meta-i-c  md-link"><a href="https://github.com/aliyoussefi/MonitoringPowerPlatform/issues" rel="noopener noreferrer" target="_blank"><span class="md-plain">please go here to submit a new issue</span></a></span><span class="md-plain">.</span></p>
<h2 class="md-end-block md-heading"><span class="md-plain">Index</span></h2>
<p><span class="md-plain"></span>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain"> </span></p>
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="/crm/b/crminthefield/posts/monitoring-the-power-platform-introduction" rel="noopener noreferrer" target="_blank"><span class="md-plain">Monitoring the Power Platform: Introduction and Index</span></a></span></p>